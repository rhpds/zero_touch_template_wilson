= Advanced Container Configuration
:estimated-time: 5-10 minutes
:navtitle: Container Advanced

== Overview

Advanced container patterns for Zero Touch deployments, covering multi-service architectures, storage management, monitoring, and testing strategies.

[TIP]
====
**New Structure**: This guide has been reorganized into focused, digestible sections. Each area now has dedicated documentation with clear learning outcomes and practical examples.
====

== Advanced Container Topics

=== Multi-Service Application Patterns

**xref:container-multi-service-patterns.adoc[Multi-Service Container Patterns]**

Learn how to deploy and manage complex application stacks:

* **Multi-tier application architectures** - Web, API, database layers
* **Microservices communication** - Service discovery and inter-service communication
* **Development environment patterns** - Complete dev stacks with hot reloading
* **Testing environment setup** - Automated testing with containerized services
* **Resource planning and allocation** - Memory, CPU, and dependency management

** Time**: 15-20 minutes | **Level**: Intermediate

---

=== Storage and Data Management

**xref:container-storage-management.adoc[Container Storage Management]**

Master persistent data handling in containerized environments:

* **Volume types and patterns** - EmptyDir, ConfigMap, and persistent volumes
* **Database storage configuration** - PostgreSQL, MySQL with persistence
* **Data sharing between containers** - Shared volumes and file patterns
* **Backup and recovery strategies** - Automated backup for container data
* **Performance optimization** - Storage performance tuning and best practices

** Time**: 15-20 minutes | **Level**: Intermediate

---

=== Monitoring and Observability

**xref:container-monitoring-logging.adoc[Container Monitoring & Logging]**

Implement comprehensive monitoring for containerized applications:

* **Metrics collection with Prometheus** - Container and application metrics
* **Centralized logging with Fluentd** - Log aggregation and parsing
* **Health checks and alerting** - Proactive monitoring and notification
* **Performance monitoring** - APM integration and custom metrics
* **Debugging techniques** - Log analysis and troubleshooting methods

** Time**: 15-20 minutes | **Level**: Intermediate

---

=== Testing and Validation

**xref:container-testing-validation.adoc[Container Testing & Validation]**

Develop comprehensive testing strategies for containers:

* **Unit and integration testing** - Isolated test environments
* **End-to-end testing** - Browser-based and API testing
* **Performance and load testing** - K6 load testing patterns
* **Deployment validation** - Health checks and configuration validation
* **Debugging and troubleshooting** - Systematic debugging approaches

** Time**: 15-20 minutes | **Level**: Intermediate

---

## Network Security Requirements for Container SSH Access

**CRITICAL**: Zero Touch deployments use network policies that **block SSH from containers to VMs** by default.

[IMPORTANT]
====
**Container SSH Access Configuration**

If your containers need SSH access to VMs (development tools, monitoring, administrative tasks), you MUST configure network policies.

**Default Behavior**: SSH connections from containers to VMs are blocked
**Required Solution**: Add network policy rules to deployment variables
====

**Quick Reference**: xref:network-policy-configuration.adoc[Network Policy Configuration for Container SSH Access]

**Required Configuration for SSH Access:**
[source,yaml]
----
# In your sample_vars.yml or deployment configuration
zero_touch_ingress_lockdown_rules:
  - from:
      - podSelector:
          matchLabels:
            app.kubernetes.io/name: showroom  # Existing Showroom access
  - from:  
      - podSelector:
          matchLabels:
            app.kubernetes.io/name: vscode    # Container SSH access
    ports:
      - protocol: TCP
        port: 22
----

## Choosing Your Path

=== When to Use Each Pattern

**Multi-Service Patterns** - Best for:
- Complex applications requiring multiple services
- Microservices architectures
- Development environments with multiple components
- Applications requiring service-to-service communication

** Storage Management** - Essential when:
- Applications need persistent data
- Sharing data between containers
- Database deployments
- File processing workflows

** Monitoring & Logging** - Critical for:
- Production deployments
- Troubleshooting and debugging
- Performance optimization
- Compliance and audit requirements

** Testing & Validation** - Required for:
- Quality assurance processes
- Continuous integration/deployment
- Performance validation
- Production readiness verification

##  Getting Started

### Quick Start Recommendations

1. **Start Simple**: Begin with xref:container-basics.adoc[Container Basics] if you're new to containers
2. **Build Complexity**: Progress to multi-service patterns as your requirements grow
3. **Add Observability**: Implement monitoring and logging early in development
4. **Validate Thoroughly**: Use testing patterns to ensure reliability

### Learning Path

**Beginner → Intermediate → Advanced**

```
Container Basics → Multi-Service Patterns → Storage Management
                                        ↘
Testing & Validation ← Monitoring & Logging
```

##  Related Documentation

**Foundation Knowledge:**
* xref:container-basics.adoc[**Container Basics**] - Start here for container fundamentals
* xref:vm-basics.adoc[**VM Basics**] - Understanding VMs alongside containers
* xref:networking-basics.adoc[**Networking Basics**] - Network configuration essentials

**Advanced Topics:**
* xref:network-policy-configuration.adoc[**Network Policy Configuration**] - Container security and SSH access
* xref:advanced-lab-features.adoc[**Advanced Lab Features**] - AgnosticD workload extensions
* xref:enterprise-lab-patterns.adoc[**Enterprise Lab Patterns**] - Large-scale deployment patterns

**Platform Understanding:**
* xref:deployment-architecture.adoc[**Deployment Architecture**] - How containers fit in the overall system
* xref:cnv-platform-features.adoc[**OpenShift CNV Platform Features**] - Container platform capabilities

**Advanced container patterns provide the foundation for building scalable, maintainable, and observable applications in Zero Touch lab environments!**

[bibliography]
== References

* [[[template-instances]]] Red Hat GPTE Team. Zero Touch Template Instance Configuration. 
  `/home/wilson/Projects/zero_touch_template_wilson/config/instances.yaml`. 2024.

* [[[roadshow-instances]]] Red Hat Ansible Team. AAP 2.5 Roadshow Lab Instance Configuration. 
  `/home/wilson/Projects/showroom_git/zt-ans-bu-roadshow01/config/instances.yaml`. 2024.